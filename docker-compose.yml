version: '3'

services:
  rabbitmq:
    image: rabbitmq
    ports:
      - 5672:5672
      - 15672:15672
  arcusd:
    build: .
    tty: true
    volumes:
      - .:/arcusd
    ports:
      - 3000:3000
    depends_on:
      - rabbitmq
    environment:
      - COVERALLS_REPO_TOKEN
      - ARCUS_API_KEY
      - ARCUS_SECRET_KEY
      - ARCUS_USE_SANDBOX
      - ARCUSD_AMPQ_ADDRESS
      - ARCUSD_CALLBACK_URL
      - ARCUSD_PAYMENTS_QUEUE
      - ARCUSD_WORKERS